Return-Path: <linux-xfs+bounces-21142-lists+linux-xfs=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-xfs@lfdr.de
Delivered-To: lists+linux-xfs@lfdr.de
Received: from am.mirrors.kernel.org (am.mirrors.kernel.org [147.75.80.249])
	by mail.lfdr.de (Postfix) with ESMTPS id C3915A77E15
	for <lists+linux-xfs@lfdr.de>; Tue,  1 Apr 2025 16:43:30 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by am.mirrors.kernel.org (Postfix) with ESMTPS id 2F20D1890002
	for <lists+linux-xfs@lfdr.de>; Tue,  1 Apr 2025 14:43:40 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id A6D34204F63;
	Tue,  1 Apr 2025 14:43:26 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b="csJFBNwH"
X-Original-To: linux-xfs@vger.kernel.org
Received: from smtp.kernel.org (aws-us-west-2-korg-mail-1.web.codeaurora.org [10.30.226.201])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 66E7A204C30
	for <linux-xfs@vger.kernel.org>; Tue,  1 Apr 2025 14:43:26 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=10.30.226.201
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1743518606; cv=none; b=AAnqwVXRcT2+IhxNs6hrbtrIdxDumgC3/9muuXGtKYZ+IvjiY3LP7ToaA02T+ocJ9oU2t39XWUE1oGLHUMBZYVvluEvHKSU+zzmxHx4ad3P2yS7z6VymbhR8+vjyAwoZ/pXN2957pvbmCy/cQV/Z8n3p4Ee/oj9srVc7Fz/+pSs=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1743518606; c=relaxed/simple;
	bh=SsH7loLnGm/JJmQrREy8Y2CGz/m/27jiQ10KOqrr7ho=;
	h=Date:Subject:From:To:Cc:Message-ID:In-Reply-To:References:
	 MIME-Version:Content-Type; b=Ie26Rt7zNWdel3vieGhAwpwNlnpaObvc4Ywvo4J2mVAre/E4VLbvDIJgJnq9N7f0aI1JNT8uzEu+Mo4gapAz+wrG6n2Kxy6ACdrLsCLz+yRdtltUJT7jiJoC8v7OU0KPoucDtPYpxHy7+z8e1fmaJOGDNHpef7dNy4EDXkahplk=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b=csJFBNwH; arc=none smtp.client-ip=10.30.226.201
Received: by smtp.kernel.org (Postfix) with ESMTPSA id C9AAFC4CEE4;
	Tue,  1 Apr 2025 14:43:25 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1743518605;
	bh=SsH7loLnGm/JJmQrREy8Y2CGz/m/27jiQ10KOqrr7ho=;
	h=Date:Subject:From:To:Cc:In-Reply-To:References:From;
	b=csJFBNwHtTu+buaEqV7aMB6gLn0NNOlsAVB5Pm2RDTFP9dWyGOJg6QtkU4vZbZG3O
	 TrEMSUtestt2Bcm2lU7ryNAFODmuq/bAZ7cNruVzwK2Pe6I6UgQQJNzINOa0c4uG8X
	 SlT5si1ZTXqWzH491T+tdvvRn7BzCLEdnDbU7s8azU/We6UWtcIxr0OVXKV5XDVwFZ
	 Bv/ZWgbN/gG/e0jCElIsEnxU3Y9VF3Vfwy3AuJ3G3Pa3kRT49uyOKQMWJsCrte+gev
	 eLVE6YphMIiFC3APUJNLflNjV0ZlaaSBTahaMM61H7uDKE9JxNrhBxt5m5syUQqVOz
	 oAqltzvscDlXw==
Date: Tue, 01 Apr 2025 07:43:25 -0700
Subject: [PATCHSET] xfsprogs: localize the python programs
From: "Darrick J. Wong" <djwong@kernel.org>
To: djwong@kernel.org, aalbersh@kernel.org
Cc: linux-xfs@vger.kernel.org
Message-ID: <174351857556.2774496.13689449454739654191.stgit@frogsfrogsfrogs>
In-Reply-To: <20250321212508.GH4001511@frogsfrogsfrogs>
References: <20250321212508.GH4001511@frogsfrogsfrogs>
Precedence: bulk
X-Mailing-List: linux-xfs@vger.kernel.org
List-Id: <linux-xfs.vger.kernel.org>
List-Subscribe: <mailto:linux-xfs+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-xfs+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit

Hi all,

We ship two Python programs in the main xfsprogs package, but neither of
them actually participate in gettext, which means that the output is
always English no matter what user's locale settings are.  Fix that by
adding them to the autogenerated message catalog.

If you're going to start using this code, I strongly recommend pulling
from my git trees, which are linked below.

With a bit of luck, this should all go splendidly.
Comments and questions are, as always, welcome.

--D

xfsprogs git tree:
https://git.kernel.org/cgit/linux/kernel/git/djwong/xfsprogs-dev.git/log/?h=localization
---
Commits in this patchset:
 * xfs_protofile: rename source code to .py.in
 * xfs_scrub_all: rename source code to .py.in
 * Makefile: inject package name/version/bugreport into pot file
 * xfs_protofile: add messages to localization catalog
 * xfs_scrub_all: localize the strings in the program
---
 configure.ac              |    3 +-
 include/builddefs.in      |    1 +
 include/buildrules        |    9 ++++++-
 libfrog/Makefile          |   18 ++++++++++++-
 libfrog/gettext.py.in     |   12 +++++++++
 mkfs/Makefile             |   11 +++++---
 mkfs/xfs_protofile.py.in  |   21 +++++++++------
 scrub/Makefile            |   11 +++++---
 scrub/xfs_scrub_all.py.in |   62 +++++++++++++++++++++++++++------------------
 9 files changed, 103 insertions(+), 45 deletions(-)
 create mode 100644 libfrog/gettext.py.in
 rename mkfs/{xfs_protofile.in => xfs_protofile.py.in} (85%)
 rename scrub/{xfs_scrub_all.in => xfs_scrub_all.py.in} (89%)


