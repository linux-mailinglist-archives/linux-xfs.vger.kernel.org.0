Return-Path: <linux-xfs-owner@vger.kernel.org>
X-Original-To: lists+linux-xfs@lfdr.de
Delivered-To: lists+linux-xfs@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 73FBEAE3F5
	for <lists+linux-xfs@lfdr.de>; Tue, 10 Sep 2019 08:47:18 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2404484AbfIJGrN (ORCPT <rfc822;lists+linux-xfs@lfdr.de>);
        Tue, 10 Sep 2019 02:47:13 -0400
Received: from verein.lst.de ([213.95.11.211]:56715 "EHLO verein.lst.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S2404308AbfIJGrN (ORCPT <rfc822;linux-xfs@vger.kernel.org>);
        Tue, 10 Sep 2019 02:47:13 -0400
Received: by verein.lst.de (Postfix, from userid 2407)
        id 8A8D668B02; Tue, 10 Sep 2019 08:47:09 +0200 (CEST)
Date:   Tue, 10 Sep 2019 08:47:09 +0200
From:   Christoph Hellwig <hch@lst.de>
To:     Dave Chinner <david@fromorbit.com>
Cc:     kbuild test robot <lkp@intel.com>, Christoph Hellwig <hch@lst.de>,
        kbuild-all@01.org, linux-xfs@vger.kernel.org,
        "Darrick J. Wong" <darrick.wong@oracle.com>
Subject: Re: [xfs-linux:iomap-for-next 3/12]
 include/trace/events/iomap.h:49:39: warning: 'struct page' declared
 inside parameter list will not be visible outside of this
 definition or declaration
Message-ID: <20190910064709.GA31448@lst.de>
References: <201909072347.PRqg4Chr%lkp@intel.com> <20190908213853.GC16973@dread.disaster.area>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20190908213853.GC16973@dread.disaster.area>
User-Agent: Mutt/1.5.17 (2007-11-01)
Sender: linux-xfs-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-xfs.vger.kernel.org>
X-Mailing-List: linux-xfs@vger.kernel.org

On Mon, Sep 09, 2019 at 07:38:53AM +1000, Dave Chinner wrote:
> >    In file included from include/trace/events/iomap.h:15,
> >                     from <command-line>:
> > >> include/trace/events/iomap.h:49:39: warning: 'struct page' declared inside parameter list will not be visible outside of this definition or declaration
> >      TP_PROTO(struct inode *inode, struct page *page, unsigned long off, \
> 
> The only file that includes trace/events/iomap.h most definitely
> has already defined struct page, and
> 
> 
> >    include/trace/events/iomap.h:49:18: warning: 'struct inode' declared inside parameter list will not be visible outside of this definition or declaration
> >      TP_PROTO(struct inode *inode, struct page *page, unsigned long off, \
> >                      ^~~~~
> 
> struct inode as well. 
> 
> So I'm not sure where the error is actually coming from, nor why it
> might only be generated by an obscure architecture (I've never heard
> of nds32 until now).

This looks like the magic code that ensures every header can be compiled
standalone.  Which so far hasn't helped anything but caused tons of
pointless warnings.

That being said adding a couple struct forward declarations seems like
and easy way to shut it up here.
