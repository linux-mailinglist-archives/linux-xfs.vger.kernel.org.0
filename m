Return-Path: <linux-xfs-owner@vger.kernel.org>
X-Original-To: lists+linux-xfs@lfdr.de
Delivered-To: lists+linux-xfs@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 34EC6450E92
	for <lists+linux-xfs@lfdr.de>; Mon, 15 Nov 2021 19:13:47 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S240281AbhKOSQj (ORCPT <rfc822;lists+linux-xfs@lfdr.de>);
        Mon, 15 Nov 2021 13:16:39 -0500
Received: from mx1.bul.net ([195.85.215.56]:40614 "EHLO mx1.bul.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S239694AbhKOSJI (ORCPT <rfc822;linux-xfs@vger.kernel.org>);
        Mon, 15 Nov 2021 13:09:08 -0500
Received: by mx1.bul.net (Postfix, from userid 1002)
        id BB05460724; Mon, 15 Nov 2021 20:06:08 +0200 (EET)
X-Spam-Checker-Version: SpamAssassin 3.4.2 (2018-09-13) on mx1.bul.net
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,T_SPF_HELO_PERMERROR,
        URIBL_BLOCKED autolearn=unavailable autolearn_force=no version=3.4.2
Received: from purple.bonev.com (purple.bonev.com [195.85.215.215])
        by mx1.bul.net (Postfix) with ESMTP id 9322B60846
        for <linux-xfs@vger.kernel.org>; Mon, 15 Nov 2021 20:06:03 +0200 (EET)
Received: (qmail 27929 invoked by uid 64020); 15 Nov 2021 20:06:03 +0200
Received: from unknown (HELO ?10.10.10.6?) (bbonev@ipacct.com@195.85.215.8)
  by purple.bonev.com with AES256-GCM-SHA384 encrypted SMTP; 15 Nov 2021 20:06:03 +0200
Message-ID: <35f06c39ece0ece5a14e06180df91b1308fe20c3.camel@ipacct.com>
Subject: Re: [PATCH v2 3/4] debian: Fix FTBFS
From:   Boian Bonev <bbonev@ipacct.com>
To:     "Darrick J. Wong" <djwong@kernel.org>,
        Bastian Germann <bage@debian.org>
Cc:     linux-xfs@vger.kernel.org
Date:   Mon, 15 Nov 2021 20:05:59 +0200
In-Reply-To: <20211115165400.GG24307@magnolia>
References: <20211114224339.20246-1-bage@debian.org>
         <20211114224339.20246-4-bage@debian.org> <20211115165400.GG24307@magnolia>
Organization: IPACCT Ltd.
Content-Type: text/plain; charset="UTF-8"
User-Agent: Evolution 3.38.3-1 
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Precedence: bulk
List-ID: <linux-xfs.vger.kernel.org>
X-Mailing-List: linux-xfs@vger.kernel.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Hi Darrick,

On Mon, 2021-11-15 at 08:54 -0800, Darrick J. Wong wrote:
> On Sun, Nov 14, 2021 at 11:43:38PM +0100, Bastian Germann wrote:
> > From: Boian Bonev <bbonev@ipacct.com>
> > 
> > With newer autotools install-sh is regenerated by libtoolize.
> > Copy the package's version after autogen.
> > 
> > Link: https://bugs.debian.org/997656
> > Signed-off-by: Boian Bonev <bbonev@ipacct.com>
> > Signed-off-by: Bastian Germann <bage@debian.org>
> 
> /me wonders what exactly about our install-sh is so unique -- I guess
> it's DIST_ROOT (being picked up from DESTDIR?) and copying things to
> different locations?

I also saw these are not supported in the libtoolize provided install-sh:

include/buildmacros:	../$(INSTALL) -m 755 -T so_dot_version $(LIBNAME).lai
$(PKG_ROOT_LIB_DIR); \
include/buildmacros:	../$(INSTALL) -T so_dot_current $(LIBNAME).lai
$(PKG_ROOT_LIB_DIR)
include/buildmacros:	../$(INSTALL) -m 644 -T old_lib $(LIBNAME).lai
$(PKG_LIB_DIR); \
include/buildmacros:	../$(INSTALL) -T so_base $(LIBNAME).lai
$(PKG_ROOT_LIB_DIR); \
include/buildmacros:	../$(INSTALL) -m 644 -T old_lib $(LIBNAME).lai
$(PKG_LIB_DIR)

Maybe there are more, I didn't dig too deep.


> As a strict "just keep the keys out of the fire hose" measure this looks
> ok to me though.
> Reviewed-by: Darrick J. Wong <djwong@kernel.org>

Thanks for your reviews :)

With best regards,
b.
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCgAdFiEEumC8IPN+WURNbSUAE2VyCRPS8i0FAmGSoYcACgkQE2VyCRPS
8i2pXxAAhhPUBZ7+vDcRx4VO98VeHe5jpadlW+RwJjrGIDZlb+RDGFD/DmJOZxQl
/pCxsFZL6MCqL6aJmG/mBfkD8Yzv17PKM7duV9/xf2Af60xyOfGDR9hP+/A5jsZL
kOOgyAfh+rUy0yguh4iD7c5ptegX4tb+xqYGNlUqcfVMu1SGWjkrsiNGvNKadPQq
ZQvTr7sfihXLy+GGqBBzhOD5WqXVThHntsj8krPfIb8U0m/FRTpTyzfoJr/QEBPX
TevaFH+cdS+ENHzLs3iVFBIVGKjelyYb52rMauvAqyaF2dZuSTr4V86jex5TsfJk
3RB0Yri299mqqnoe8gmcF84XNMCO4MjfV1aSHVke43UPpb8gTnaU/NC5XNxjZzY6
f6iTE7yRTIxu2QIrY1Odkqm4qQUM3cnZfybpzbr+QluM6GnH42md8XS30SJAQvqx
gGo4HifPu+iyVEOjoFYSdlEtw8mA0DNHSVGk7HtWN6mwhNAj90rfq5LJeZwWO08D
sK5aKzKDBibL/7Glv0LOyVMk92MrKT5KBQ1S4qZm7DjNthz5yPvmaXNaOe4UJ6nt
EVw8DOz0nWD9aqALZGmsIjQd8BH5iTIzsSCTiVWjrJDG9SrkXezs6TnGrW5yH1+J
ZIaMA8e3ElHsAf57I+ahPMTUAUXy0MPuA2Kq96R2U9mpUbASQJ0=
=TAAn
-----END PGP SIGNATURE-----

